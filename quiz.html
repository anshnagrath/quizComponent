<!doctype html>
<html>
    <head>
       
        <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.4.2/react.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.4.2/react-dom.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.21.1/babel.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.1.1.min.js" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
        <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

     <script  type="text/babel">
 
class App extends React.Component {

constructor(){  
super();
this.selectedItem = [];
this.state = {
    selectedItem : null, tht
    numberOfQuestions: 1,
}
 this.axiosInstance = axios.create({
  baseURL: 'http://192.168.1.116/IntegratedSystem/SSBT/CreateQuiz.aspx/',

});
}
async componentDidMount() {
   
    console.log(axios,'dasddassd')
     let data = await this.axiosInstance.get('GetAllQuizQuestions')
   //  this.setState({ data: res.data });
    
}
toggleState = (i)=>{

this.setState({selectedItem:i})
if(!this.selectedItem.includes(i)){
    this.selectedItem.push(i)
}else{
this.setState({selectedItem:null})
this.selectedItem.pop()
}

}
renderAccordian = (i)=>{
return (
    <div key={i}  >
        <div onClick={()=>this.toggleState(i)} className="ui styled accordion" style={{'margin':'auto',    'margin': '40px auto 10px auto'}}>
            <div  className={"title" +   (this.state.selectedItem == i ? "active" : "")} >
            <i onClick={()=>{this.setState({selectedItem:'null'})}} className="dropdown icon" > </i>
        <p className={"transition"+(this.state.selectedItem == i ? 'visible':'hidden')} style={{'position': 'relative','left': '21px','bottom': '20px'}}>Quiz Title:</p>   
      </div>
 
    <div className={"content"+(this.state.selectedItem == i ? 'active':'')}>
        <i className="edit icon" style={{ 'position': 'relative','left': '560px'}}  onClick={()=>this.setState({editSelected:i})} ></i>
            <p className={"transition"+ (this.state.selectedItem == i ? 'visible':'hidden')} >Number of quiz submitted:</p>
            <p className={"transition"+ (this.state.selectedItem == i ? 'visible':'hidden')} >Total number of questions present:</p>
    </div>
  
  
    </div>
    </div>
  )
}
addQuestion=()=>{
 this.setState(previousState=>  {return{numberOfQuestions:previousState.numberOfQuestions+1}})   
 console.log(this.state.numberOfQuestions)
}
removeQuestion=()=>{
if(this.state.numberOfQuestions>1){
this.setState(previousState=>{return {numberOfQuestions:previousState.numberOfQuestions-1}})
}    
}
editComponent=(i)=>{
 return(
    
  <div key ={i} style={{"maxWidth": "600px", "margin": "0 auto", "position": "relative","marginBottom":'132px'}}>
    <div style={{'textAlign': 'center','marginTop': '52px'}} className="field">
     <div >  
     <p>Quiz Title</p>   
    <label  style={{'position': 'absolute'}}>Enter Questions Here</label>
    <textarea style={{'width':'600px'}}rows="6"></textarea>
     </div>
     
     <div className="ui input" style={{"marginTop": "18px","marginLeft": "0px", "position":"absolute", "left":"0px"}}>
        <input type="text" placeholder="Add Option Here"/>
        <i className="large plus square icon" style={{"marginLeft": "10px","marginTop": "10px"}}></i>
        <i className="large minus square icon" style={{"marginLeft": "0px ","marginTop": "10px"}}></i>

   </div> 
     <select style={{"position":"absolute", "right":"0px", "marginTop": "18px"}} className = "ui selection   dropdown">
          <option value="">Gender</option>
           <option value="1">Male</option>
          <option value="0">Female</option>
    </select>
    
   </div>


   
</div>
        
    )
}
addButton = () =>{
return (
 <div>   
<a onClick= {()=>this.addQuestion()} style={{"position":"fixed","width":"60px","height":"60px","bottom":"40px","right":"120px","backgroundColor":"#0C9","color":"#FFF","borderRadius":"50px","textAlign":"center","boxShadow": "2px 2px 3px #999"}}>
<i style={{"marginTop":"22px"}} className="plus icon"></i>
</a>
<a onClick={()=>this.removeQuestion()} style={{"position":"fixed","width":"60px","height":"60px","bottom":"40px","right":"40px","backgroundColor":"#0C9","color":"#FFF","borderRadius":"50px","textAlign":"center","boxShadow": "2px 2px 3px #999"}}>
<i style={{"marginTop":"22px"}} className="minus icon"></i>
</a>
</div>
)
}
renderEditContent = ()=>{
const compoents = []
 for(let i=0;i<this.state.numberOfQuestions;i++ ){
    compoents.push(this.editComponent(i))
}
//  return (<div> {compoents} <div/>)
return compoents 
 
}
quizTitle(){
return(
    <div>
    <p style={{"textAlign":"center"}}>Quiz Title</p>
    
    </div>
)
}

render() {

return ( <div>
    {(this.state.editSelected == null ) ? '':this.quizTitle()}
     {
    (this.state.editSelected == null)? this.state.data.map((el,i) => {return this.renderAccordian(i) }) : this.renderEditContent(this.state.editSelected)
    }
   
    {(this.state.editSelected == null)?'':this.addButton()}
</div>
)
    
}
}


ReactDOM.render(<App />,document.getElementById('root'));
        </script>
    </head>
    <body>
            <div id="root"></div>
    </body>
</html>
